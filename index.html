<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DTM‚ÄëEvents</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 { color: #66ff66; margin-bottom: 0.5rem; }
    .btn {
      padding: 0.8rem 1.4rem;
      margin: 0.5rem;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
    }
    .normal { background: #28a745; color: white; }
    .vip { background: #ffcc00; color: black; }
    .counter, .timer {
      margin-top: 2rem;
      font-size: 1.2rem;
    }
    select, button {
      font-size: 1rem;
      margin: 0.5rem;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

  <img src="dtm-logo.png" alt="DTM Events Logo" width="200">
  <h1>DTM‚ÄëEvents Ticket Shop</h1>
  <p>Kies je event en koop je ticket hieronder:</p>

  <label for="eventSelect">üé™ Selecteer event:</label>
  <select id="eventSelect">
    <option value="helmond_festival">Helmond Festival</option>
  </select>

  <div>
    <button class="btn normal" onclick="koopTicket('normal')">üéü Normaal (gratis)</button>
    <button class="btn vip" onclick="koopTicket('vip')">üåü VIP (35 Robux)</button>
  </div>

  <div class="counter">
    <p>Normale tickets verkocht: <span id="normalCount">0</span></p>
    <p>VIP tickets verkocht: <span id="vipCount">0</span></p>
  </div>

  <div class="timer">
    <p>‚è≥ Tijd tot Helmond Festival:</p>
    <p id="countdown">Bezig met laden...</p>
  </div>

  <script>
    // ‚úÖ Firebase Config van jou
    const firebaseConfig = {
      apiKey: "AIzaSyAq2hnWZnhoMzVC_NZ3efND3xEkijRy23k",
      authDomain: "dtm-evemts.firebaseapp.com",
      databaseURL: "https://dtm-evemts-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "dtm-evemts",
      storageBucket: "dtm-evemts.firebasestorage.app",
      messagingSenderId: "673592896357",
      appId: "1:673592896357:web:4aa0d051ad738c12a80f8c",
      measurementId: "G-GFRH4KY8GF"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const normalSpan = document.getElementById("normalCount");
    const vipSpan = document.getElementById("vipCount");
    const eventSelect = document.getElementById("eventSelect");

    function updateCounts() {
      const eventKey = eventSelect.value;
      const ref = db.ref("tickets/" + eventKey);
      ref.on("value", (snapshot) => {
        const data = snapshot.val() || { normal: 0, vip: 0 };
        normalSpan.textContent = data.normal;
        vipSpan.textContent = data.vip;
      });
    }

    function koopTicket(type) {
      const eventKey = eventSelect.value;
      const ref = db.ref(`tickets/${eventKey}/${type}`);
      ref.transaction(current => (current || 0) + 1);
      alert(`Je hebt een ${type === 'vip' ? 'VIP' : 'normaal'} ticket gekocht!`);
    }

    // Timer naar 2 of 9 augustus
    const countdownEl = document.getElementById("countdown");
    function updateTimer() {
      const now = new Date();
      const aug2 = new Date(now.getFullYear(), 7, 2);
      const aug9 = new Date(now.getFullYear(), 7, 9);
      const target = now < aug2 ? aug2 : aug9;
      const diff = target - now;

      if (diff <= 0) {
        countdownEl.textContent = "Het festival is begonnen!";
        return;
      }

      const days = Math.floor(diff / 1000 / 60 / 60 / 24);
      const hours = Math.floor((diff / 1000 / 60 / 60) % 24);
      const mins = Math.floor((diff / 1000 / 60) % 60);
      const secs = Math.floor((diff / 1000) % 60);

      countdownEl.textContent = `${days}d ${hours}u ${mins}m ${secs}s tot ${target.getDate()} augustus`;
    }
    setInterval(updateTimer, 1000);

    // Start
    eventSelect.addEventListener("change", updateCounts);
    updateCounts();
    updateTimer();
  </script>

</body>
</html>
